## 好莱坞原则和依赖倒置原则

### 好莱坞原则

> 别打电话给我，有事我会打电话给你

什么叫好莱坞原则？为什么要用好莱坞原则？它的独到之处是什么？

好莱坞原则源自好莱坞的导演和演员`don't call us, we will call you` ，直译也就是说当高层组件依赖低层组件时，处理方式是让高层组件调用低层组件。具体应用时就是让高层组件不直接调用地层组件，而是从容器中获取。

好莱坞原则有助于解耦，当高层组件、低层组件以及边侧组件有复杂的依赖的关系时，好莱坞原则有助于创建一个弹性的设计，避免循环依赖的产生。

具体应用场景有IOC，设计模式中的模板模式、工厂模式、观察者。

#### IOC

一般情况，我们在对象A中遇到需要另一个类对象B时，通常直接new一个类对象B实例，这建立了类A与类B的依赖关系，此时控制权在对象A中。

在IOC(Inversion of Control，控制反转)场景中，类A和类B通过Spring容器的IOC Service Provider来打交道，当类需要类B时，通知provider即可获得类B的实例。此时控制权在IOC Service Provider中。

以上完成了控制反转，Spring的IOC服务的实现方式很多，可以直接写在XML文件中。

#### 模板模式

模板方法主要采用继承的方式(JDK8之后，使用default关键字采用接口的方式也可以)，在父类(基类，超类)中抽象出所有有共同点的方法，在具体调用时，由父类根据情况调用子类的具体方法实现。

#### 观察者

观察者模式是一个   被观察者--中转站--观察者  的模型，被观察者每次变化后需要通知中转站，中转站调用观察者的更新方法。这个中转站也相当于一个第三方容器了。

#### 工厂模式

工厂模式也是面对接口编程，由工厂进行创建需求的子类



## 依赖倒置原则

* 高层次的模块不应该依赖于低层次的模块，他们都应该依赖于抽象。
* 抽象不应该依赖于具体实现，具体实现应该依赖于抽象。

依赖倒置原则教我们尽量避免使用具体类，而多使用抽象。它更像一种你应该养成的习惯，要求你面对接口编程。

> 例子：类A,类B，类C,都有相同的属性，相同的方法，然后都有可能被类H调用（高层调用低层），这样H类的实例如果调用这三个类，那么这个类H就和这三个类就发生了耦合，但是如果把这三个类抽取出一个接口I，类H调用I（面向接口编程），H就依赖于接口，A、B、C也依赖于接口。好处是，在这种情况下，类与类之间的耦合降低了，不依赖具体类而是依赖于接口。

不依赖于具体模块也就是说出行不依赖于自行车，而应该依赖于交通工具，这样更为弹性。

抽象不应该依赖于具体实现也就是说，具体实现应该继承抽象类或者实现接口，抽象类(父类)根据具体调用时候传入的对象类型，选择子类。交通工具类中不应该有具体实现，在出行时根据传入的参数选择是自行车或是其他。